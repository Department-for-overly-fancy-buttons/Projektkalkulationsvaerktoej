<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Projekt</title>
    <link rel="styleSheet" th:href="@{/style.css}"/>
</head>
<body>
    <div th:replace="~{fragments/header :: header}"></div>
    <div id="overviewLayout">
        <div class="descriptionBox">
            <h1 th:text="${project.name}"></h1>
            <h3 th:text="${#dates.format(project.startDate, 'yyyy-MM-dd') + '  ->  ' + #dates.format(project.deadline, 'yyyy-MM-dd') + '        ' + hourEstimate}"></h3>
            <div id="assignmentDescriptionBox">
                <p th:text="${project.description}"></p>
            </div>
            <a class="button" th:href="@{/project/{projectName}/edit (projectName=${projectName})}">Rediger projekt</a>
        </div>


    <a class="button" th:href="@{/project/{projectName}/create/task (projectName = ${projectName})}">Opret ny Opgave</a>

        <div class="overview">
            <form method="post" th:action="@{/project/task/getID}" th:object="${task}" class="projectItem" th:each="task : ${tasks}">
                <button id="openProjectButton" type="submit">
                    <div>
                        <p class="projectItemText" th:text="${task.name}"></p>
                        <p class="projectItemText" th:text="${#dates.format(task.startDate, 'yyyy-MM-dd') + ' -> ' + #dates.format(task.deadLine, 'yyyy-MM-dd')}"></p>
                        <div id="progressbarBorder">
                            <div id="progressbarProgress" th:style="'width:' + (${percentOfProgressDone.removeFirst()}) + '%'">
                            </div>
                        </div>


                        <input type="hidden" name="taskID" th:value="${task.taskID}"/>
                        <input type="hidden" name="taskName" th:value="${task.name}">
                    </div>
                </button>
            </form>
            <div class="projectItem">
                <input id="createProjectButton" type="image"  th:attr="onclick=|location.href='/project/${project.name}/create/task'|" th:src="@{/images/Dept=ofb_Logo.png}" alt="Create new task">
            </div>
        </div>
    <a class="button" th:href="@{/project/list}">Tilbage til projektliste</a>
    </div>
</body>
</html>