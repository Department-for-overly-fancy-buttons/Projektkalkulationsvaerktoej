<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>My tasks</title>
    <link rel="styleSheet" th:href="@{/style.css}"/>
</head>
<body>
<div th:replace="~{fragments/header :: header}"></div>
<div id="overviewLayout"></div>
<div id="overviewStyle">
    <h1>Projects</h1>
    <div class="overview">
        <form method="post" th:action="@{/project/getID}" th:object="${project}" class="overviewItem"
              th:each="project : ${projects}">
            <input type="hidden" name="projectID" th:value="${project.projectID}"/>
            <input type="hidden" name="projectName" th:value="${project.name}">
            <button id="openProjectButton" type="submit">
                <div>
                    <p class="overviewItemText" th:text="${project.name}"></p>
                    <p class="overviewItemText" th:text="${#dates.format(project.deadline, 'dd-MM-yyyy')}"></p>
                    <div th:if="${project.hourEstimate} != 0">
                        <label for="hourProgressTask"></label>
                        <progress id="hourProgressProject"
                                  th:value="(${project.hourEstimate}-${project.hoursRemaining})/${project.hourEstimate}"></progress>
                    </div>
                </div>
            </button>
        </form>
    </div>
</div>

<div id="overviewStyle2">
    <h1>My tasks</h1>
    <div class="overview">
        <form th:if="!${tasks.isEmpty()}" method="post" th:action="@{/project/task/getID}" th:object="${task}"
              class="overviewItem"
              th:each="task : ${tasks}">
            <input type="hidden" name="taskID" th:value="${task.taskID}"/>
            <input type="hidden" name="taskName" th:value="${task.name}">
            <button id="openTaskButton" type="submit">
                <div>
                    <p class="overviewItemText" th:text="${task.name}"></p>
                    <p class="overviewItemText"
                       th:text="${#dates.format(task.startDate, 'dd-MM-yyyy') + ' -> ' + #dates.format(task.deadLine, 'dd-MM-yyyy')}"></p>
                    <div>
                        <a th:text="${task.hourEstimate}-${task.hoursRemaining} + '/' + ${task.hourEstimate}"></a>
                        <br>
                        <label for="hourProgressTask"></label>
                        <progress id="hourProgressTask"
                                  th:value="(${task.hourEstimate}-${task.hoursRemaining})/${task.hourEstimate}"></progress>
                    </div>
                </div>
            </button>
        </form>
    </div>

    <a th:if="${tasks.isEmpty()}">No active tasks</a>
</div>
<a th:href="@{/project/list}">View all projects</a>
</div>
</body>
</html>